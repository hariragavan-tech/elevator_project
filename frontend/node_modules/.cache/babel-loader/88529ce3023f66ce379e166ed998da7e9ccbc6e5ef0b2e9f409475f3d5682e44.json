{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hari\\\\OneDrive\\\\Desktop\\\\elevator_project\\\\frontend\\\\src\\\\ExpertPanel.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\n\n// --- MOCKED AUTH HOOK ---\n// Mocking the auth context for a single-file React environment.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useAuth = () => {\n  _s();\n  // Return a default expert user for functionality testing\n  const [user, setUser] = useState({\n    uid: 'EXPERT_12345'\n  });\n  const signOut = () => {\n    // In a real app, this would handle Firebase sign-out\n    console.log(\"Mock Sign Out triggered.\");\n    setUser(null);\n  };\n  return {\n    user,\n    signOut\n  };\n};\n// --- END MOCKED AUTH HOOK ---\n\n// Utility function to generate a readable ISO timestamp\n_s(useAuth, \"yNUQjaOMTyB2oRupm91tuOma6Dc=\");\nconst getTimestamp = () => new Date().toISOString();\n\n// Utility for exponential backoff (crucial for API calls)\nconst fetchDataWithRetry = async (url, options, retries = 3) => {\n  for (let i = 0; i < retries; i++) {\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        // Throw an error for non-200 responses\n        const errorText = await response.text();\n        throw new Error(`Server Error (${response.status}): ${errorText.substring(0, 100)}...`);\n      }\n      return response;\n    } catch (error) {\n      if (i < retries - 1) {\n        // Exponential backoff wait: 1s, 2s, 4s\n        const delay = Math.pow(2, i) * 1000;\n        console.warn(`Fetch attempt ${i + 1} failed. Retrying in ${delay}ms...`);\n        await new Promise(resolve => setTimeout(resolve, delay));\n      } else {\n        throw error; // Throw final error\n      }\n    }\n  }\n};\nconst ExpertPanel = () => {\n  _s2();\n  const {\n    user,\n    signOut\n  } = useAuth();\n  const [problem, setProblem] = useState('');\n  const [cause, setCause] = useState('');\n  const [steps, setSteps] = useState('');\n  const [message, setMessage] = useState('');\n  const [storedLogs, setStoredLogs] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const expertId = (user === null || user === void 0 ? void 0 : user.uid) || 'expert_demo';\n  const API_URL = 'http://127.0.0.1:8001';\n  const fetchLogs = async () => {\n    if (!user) return;\n    setLoading(true);\n    setMessage('');\n    try {\n      // Fetch using the expert's ID\n      const response = await fetchDataWithRetry(`${API_URL}/get_logs/${expertId}`);\n      const data = await response.json();\n\n      // Assume the backend returns an array of documents or metadatas\n      let logsToDisplay = [];\n      if (data.logs && data.logs.metadatas) {\n        // Structure the log data from metadatas\n        logsToDisplay = data.logs.metadatas.map((meta, index) => ({\n          id: data.logs.ids[index],\n          // Use the unique ID from Chroma\n          problem: meta.problem || 'N/A',\n          cause: meta.cause || 'N/A',\n          steps: meta.steps || 'N/A',\n          timestamp: meta.timestamp ? new Date(meta.timestamp).toLocaleString() : 'N/A'\n        })).reverse(); // Show newest first\n      } else {\n        setMessage('Warning: Data structure unexpected. Cannot display logs.');\n      }\n      setStoredLogs(logsToDisplay);\n    } catch (error) {\n      console.error(\"Error fetching logs:\", error);\n      setMessage(`🔴 Error fetching logs. Is the /get_logs endpoint implemented? ${error.message.substring(0, 60)}...`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    // Fetch logs only when the user object is confirmed\n    if (user) {\n      fetchLogs();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n  const handleLogSubmit = async e => {\n    e.preventDefault();\n    setMessage('');\n    if (!user) {\n      setMessage('🔴 Error: You must be signed in to submit logs.');\n      return;\n    }\n    if (!problem.trim() || !cause.trim() || !steps.trim()) {\n      setMessage('Please fill in all three fields (Problem, Cause, Steps).');\n      return;\n    }\n    setLoading(true);\n    const logData = {\n      expert_id: expertId,\n      problem: problem.trim(),\n      cause: cause.trim(),\n      steps: steps.trim(),\n      timestamp: getTimestamp()\n    };\n    try {\n      const response = await fetchDataWithRetry(`${API_URL}/store_log`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(logData)\n      });\n      const result = await response.json();\n      setMessage(`✅ Success! Log stored with ID: ${result.id}`);\n      setProblem('');\n      setCause('');\n      setSteps('');\n      fetchLogs(); // Refresh the list of stored logs\n    } catch (error) {\n      console.error('Submission Error:', error);\n      setMessage(`🔴 Error submitting log: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"expert-panel p-4 md:p-8 bg-gray-900 min-h-screen text-gray-100 font-inter\",\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex flex-col md:flex-row justify-between items-start md:items-center pb-6 border-b border-blue-600 mb-8\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-extrabold text-blue-400 flex items-center mb-4 md:mb-0\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-3\",\n          children: \"\\u2699\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), \" Expert Knowledge Panel \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-base ml-4 font-normal text-gray-400\",\n          children: [\"(ID: \", expertId, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 77\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: signOut,\n        className: `px-4 py-2 text-white font-medium rounded-full shadow-lg transition duration-300 transform ${user ? 'bg-red-600 hover:bg-red-500 active:scale-95' : 'bg-green-600 hover:bg-green-500 active:scale-95'}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", user ? 'Sign Out' : 'Sign In (Mock)', \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mb-12 p-6 bg-gray-800 rounded-2xl shadow-2xl\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-6 text-blue-300 border-b border-gray-700 pb-3\",\n        children: \"Submit New Expert Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogSubmit,\n        className: \"space-y-6\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"problem\",\n            className: \"block text-gray-300 mb-2 font-medium\",\n            children: \"1. Problem / Symptom (What was the reported issue?)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"problem\",\n            value: problem,\n            onChange: e => setProblem(e.target.value),\n            rows: \"3\",\n            placeholder: \"e.g., Elevator stops abruptly between floors and smells burnt. Customer reported a loud clicking sound just before the stop.\",\n            className: \"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\",\n            disabled: loading || !user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"cause\",\n            className: \"block text-gray-300 mb-2 font-medium\",\n            children: \"2. Identified Cause (What was the root failure?)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"cause\",\n            value: cause,\n            onChange: e => setCause(e.target.value),\n            rows: \"3\",\n            placeholder: \"e.g., The main contactor coil for the traction motor overheated and failed, leading to a temporary short. Clicking sound was the contactor failing to engage.\",\n            className: \"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\",\n            disabled: loading || !user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"steps\",\n            className: \"block text-gray-300 mb-2 font-medium\",\n            children: \"3. Detailed Fixing Steps (Action Plan)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"steps\",\n            value: steps,\n            onChange: e => setSteps(e.target.value),\n            rows: \"7\",\n            placeholder: \"1. Lock out/Tag out the main power (LOTO). 2. Confirm failed contactor (CR1) by checking resistance. 3. Replace contactor CR1 (Part # XYZ-456) and associated wiring harness. 4. Run empty car through a full cycle. 5. Clear fault codes and finalize paperwork.\",\n            className: \"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\",\n            disabled: loading || !user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col md:flex-row items-start md:items-center justify-between pt-4\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100 mb-4 md:mb-0\",\n            disabled: loading || !user,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", loading ? 'Saving Knowledge...' : 'Save to Knowledge Base', \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", message && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `text-base font-semibold p-2 rounded-lg ${message.startsWith('✅') ? 'text-green-400 bg-green-900/50' : 'text-red-400 bg-red-900/50'}`,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", message, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mt-12 p-6 bg-gray-800 rounded-2xl shadow-2xl\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center border-b border-gray-700 pb-3 mb-6\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold text-blue-300\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Past Knowledge Logs (\", storedLogs.length, \" items) \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchLogs,\n          className: \"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-sm text-gray-300 font-medium rounded-full transition duration-200 disabled:opacity-50\",\n          disabled: loading || !user,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", loading ? 'Refreshing...' : 'Refresh Logs', \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"log-list space-y-4 max-h-[500px] overflow-y-auto pr-2\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", storedLogs.length > 0 ? storedLogs.map((log, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-gray-700 border border-gray-600 rounded-xl shadow-md hover:bg-gray-600 transition duration-150\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-bold text-blue-400 flex justify-between items-center\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Log ID: \", log.id.substring(0, 8), \"... \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-normal text-gray-400\",\n              children: log.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 37\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 33\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"my-2 border-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 33\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 text-sm text-gray-300\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-blue-200\",\n                children: \"Problem:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 40\n              }, this), \" \", log.problem]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 37\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-blue-200\",\n                children: \"Cause:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 40\n              }, this), \" \", log.cause]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 37\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-blue-200\",\n                children: \"Steps:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 40\n              }, this), \" \", log.steps]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 37\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 33\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, log.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 29\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 text-center py-4\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", loading ? 'Loading logs...' : 'No knowledge logs found for this expert yet.', \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 25\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 9\n  }, this);\n};\n_s2(ExpertPanel, \"dokO6kxBZWXWpNwB3TOup1mljV4=\", false, function () {\n  return [useAuth];\n});\n_c = ExpertPanel;\nexport default ExpertPanel;\nvar _c;\n$RefreshReg$(_c, \"ExpertPanel\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","useAuth","_s","user","setUser","uid","signOut","console","log","getTimestamp","Date","toISOString","fetchDataWithRetry","url","options","retries","i","response","fetch","ok","errorText","text","Error","status","substring","error","delay","Math","pow","warn","Promise","resolve","setTimeout","ExpertPanel","_s2","problem","setProblem","cause","setCause","steps","setSteps","message","setMessage","storedLogs","setStoredLogs","loading","setLoading","expertId","API_URL","fetchLogs","data","json","logsToDisplay","logs","metadatas","map","meta","index","id","ids","timestamp","toLocaleString","reverse","handleLogSubmit","e","preventDefault","trim","logData","expert_id","method","headers","body","JSON","stringify","result","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","htmlFor","value","onChange","target","rows","placeholder","disabled","type","startsWith","length","_c","$RefreshReg$"],"sources":["C:/Users/Hari/OneDrive/Desktop/elevator_project/frontend/src/ExpertPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\n// --- MOCKED AUTH HOOK ---\r\n// Mocking the auth context for a single-file React environment.\r\nconst useAuth = () => {\r\n    // Return a default expert user for functionality testing\r\n    const [user, setUser] = useState({ uid: 'EXPERT_12345' });\r\n\r\n    const signOut = () => {\r\n        // In a real app, this would handle Firebase sign-out\r\n        console.log(\"Mock Sign Out triggered.\");\r\n        setUser(null);\r\n    };\r\n\r\n    return { user, signOut };\r\n};\r\n// --- END MOCKED AUTH HOOK ---\r\n\r\n// Utility function to generate a readable ISO timestamp\r\nconst getTimestamp = () => new Date().toISOString();\r\n\r\n// Utility for exponential backoff (crucial for API calls)\r\nconst fetchDataWithRetry = async (url, options, retries = 3) => {\r\n    for (let i = 0; i < retries; i++) {\r\n        try {\r\n            const response = await fetch(url, options);\r\n            if (!response.ok) {\r\n                // Throw an error for non-200 responses\r\n                const errorText = await response.text();\r\n                throw new Error(`Server Error (${response.status}): ${errorText.substring(0, 100)}...`);\r\n            }\r\n            return response;\r\n        } catch (error) {\r\n            if (i < retries - 1) {\r\n                // Exponential backoff wait: 1s, 2s, 4s\r\n                const delay = Math.pow(2, i) * 1000;\r\n                console.warn(`Fetch attempt ${i + 1} failed. Retrying in ${delay}ms...`);\r\n                await new Promise(resolve => setTimeout(resolve, delay));\r\n            } else {\r\n                throw error; // Throw final error\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n\r\nconst ExpertPanel = () => {\r\n    const { user, signOut } = useAuth();\r\n    const [problem, setProblem] = useState('');\r\n    const [cause, setCause] = useState('');\r\n    const [steps, setSteps] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [storedLogs, setStoredLogs] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const expertId = user?.uid || 'expert_demo';\r\n    const API_URL = 'http://127.0.0.1:8001';\r\n\r\n    const fetchLogs = async () => {\r\n        if (!user) return;\r\n\r\n        setLoading(true);\r\n        setMessage('');\r\n\r\n        try {\r\n            // Fetch using the expert's ID\r\n            const response = await fetchDataWithRetry(`${API_URL}/get_logs/${expertId}`);\r\n            const data = await response.json();\r\n            \r\n            // Assume the backend returns an array of documents or metadatas\r\n            let logsToDisplay = [];\r\n            \r\n            if (data.logs && data.logs.metadatas) {\r\n                // Structure the log data from metadatas\r\n                 logsToDisplay = data.logs.metadatas.map((meta, index) => ({\r\n                    id: data.logs.ids[index], // Use the unique ID from Chroma\r\n                    problem: meta.problem || 'N/A',\r\n                    cause: meta.cause || 'N/A',\r\n                    steps: meta.steps || 'N/A',\r\n                    timestamp: meta.timestamp ? new Date(meta.timestamp).toLocaleString() : 'N/A',\r\n                 })).reverse(); // Show newest first\r\n            } else {\r\n                setMessage('Warning: Data structure unexpected. Cannot display logs.');\r\n            }\r\n\r\n            setStoredLogs(logsToDisplay);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching logs:\", error);\r\n            setMessage(`🔴 Error fetching logs. Is the /get_logs endpoint implemented? ${error.message.substring(0, 60)}...`); \r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Fetch logs only when the user object is confirmed\r\n        if (user) {\r\n            fetchLogs();\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [user]);\r\n\r\n\r\n    const handleLogSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage('');\r\n\r\n        if (!user) {\r\n            setMessage('🔴 Error: You must be signed in to submit logs.');\r\n            return;\r\n        }\r\n\r\n        if (!problem.trim() || !cause.trim() || !steps.trim()) {\r\n            setMessage('Please fill in all three fields (Problem, Cause, Steps).');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        const logData = {\r\n            expert_id: expertId, \r\n            problem: problem.trim(),\r\n            cause: cause.trim(),\r\n            steps: steps.trim(),\r\n            timestamp: getTimestamp(),\r\n        };\r\n\r\n        try {\r\n            const response = await fetchDataWithRetry(`${API_URL}/store_log`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(logData),\r\n            });\r\n\r\n            const result = await response.json();\r\n            setMessage(`✅ Success! Log stored with ID: ${result.id}`);\r\n            \r\n            setProblem('');\r\n            setCause('');\r\n            setSteps('');\r\n\r\n            fetchLogs(); // Refresh the list of stored logs\r\n\r\n        } catch (error) {\r\n            console.error('Submission Error:', error);\r\n            setMessage(`🔴 Error submitting log: ${error.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"expert-panel p-4 md:p-8 bg-gray-900 min-h-screen text-gray-100 font-inter\">\r\n            <header className=\"flex flex-col md:flex-row justify-between items-start md:items-center pb-6 border-b border-blue-600 mb-8\">\r\n                <h1 className=\"text-3xl font-extrabold text-blue-400 flex items-center mb-4 md:mb-0\">\r\n                    <span className=\"mr-3\">⚙️</span> Expert Knowledge Panel <span className=\"text-base ml-4 font-normal text-gray-400\">(ID: {expertId})</span>\r\n                </h1>\r\n                <button \r\n                    onClick={signOut} \r\n                    className={`px-4 py-2 text-white font-medium rounded-full shadow-lg transition duration-300 transform ${user ? 'bg-red-600 hover:bg-red-500 active:scale-95' : 'bg-green-600 hover:bg-green-500 active:scale-95'}`}\r\n                >\r\n                    {user ? 'Sign Out' : 'Sign In (Mock)'}\r\n                </button>\r\n            </header>\r\n\r\n            {/* --- KNOWLEDGE ENTRY SECTION --- */}\r\n            <section className=\"mb-12 p-6 bg-gray-800 rounded-2xl shadow-2xl\">\r\n                <h2 className=\"text-2xl font-semibold mb-6 text-blue-300 border-b border-gray-700 pb-3\">Submit New Expert Log</h2>\r\n                \r\n                <form onSubmit={handleLogSubmit} className=\"space-y-6\">\r\n                    \r\n                    {/* 1. PROBLEM / QUERY */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"problem\" className=\"block text-gray-300 mb-2 font-medium\">1. Problem / Symptom (What was the reported issue?)</label>\r\n                        <textarea\r\n                            id=\"problem\"\r\n                            value={problem}\r\n                            onChange={(e) => setProblem(e.target.value)}\r\n                            rows=\"3\"\r\n                            placeholder=\"e.g., Elevator stops abruptly between floors and smells burnt. Customer reported a loud clicking sound just before the stop.\"\r\n                            className=\"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\"\r\n                            disabled={loading || !user}\r\n                        ></textarea>\r\n                    </div>\r\n\r\n                    {/* 2. CAUSE */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"cause\" className=\"block text-gray-300 mb-2 font-medium\">2. Identified Cause (What was the root failure?)</label>\r\n                        <textarea\r\n                            id=\"cause\"\r\n                            value={cause}\r\n                            onChange={(e) => setCause(e.target.value)}\r\n                            rows=\"3\"\r\n                            placeholder=\"e.g., The main contactor coil for the traction motor overheated and failed, leading to a temporary short. Clicking sound was the contactor failing to engage.\"\r\n                            className=\"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\"\r\n                            disabled={loading || !user}\r\n                        ></textarea>\r\n                    </div>\r\n\r\n                    {/* 3. FIXING STEPS */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"steps\" className=\"block text-gray-300 mb-2 font-medium\">3. Detailed Fixing Steps (Action Plan)</label>\r\n                        <textarea\r\n                            id=\"steps\"\r\n                            value={steps}\r\n                            onChange={(e) => setSteps(e.target.value)}\r\n                            rows=\"7\"\r\n                            placeholder=\"1. Lock out/Tag out the main power (LOTO). 2. Confirm failed contactor (CR1) by checking resistance. 3. Replace contactor CR1 (Part # XYZ-456) and associated wiring harness. 4. Run empty car through a full cycle. 5. Clear fault codes and finalize paperwork.\"\r\n                            className=\"w-full p-4 bg-gray-700 border border-gray-600 rounded-xl focus:ring-blue-500 focus:border-blue-500 text-white resize-none shadow-inner transition duration-150\"\r\n                            disabled={loading || !user}\r\n                        ></textarea>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100 mb-4 md:mb-0\"\r\n                            disabled={loading || !user}\r\n                        >\r\n                            {loading ? 'Saving Knowledge...' : 'Save to Knowledge Base'}\r\n                        </button>\r\n                        {message && (\r\n                            <p className={`text-base font-semibold p-2 rounded-lg ${message.startsWith('✅') ? 'text-green-400 bg-green-900/50' : 'text-red-400 bg-red-900/50'}`}>\r\n                                {message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </form>\r\n            </section>\r\n\r\n            {/* --- STORED LOGS SECTION --- */}\r\n            <section className=\"mt-12 p-6 bg-gray-800 rounded-2xl shadow-2xl\">\r\n                <div className=\"flex justify-between items-center border-b border-gray-700 pb-3 mb-6\">\r\n                    <h2 className=\"text-2xl font-semibold text-blue-300\">\r\n                        Past Knowledge Logs ({storedLogs.length} items)\r\n                    </h2>\r\n                    <button \r\n                        onClick={fetchLogs} \r\n                        className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-sm text-gray-300 font-medium rounded-full transition duration-200 disabled:opacity-50\"\r\n                        disabled={loading || !user}\r\n                    >\r\n                        {loading ? 'Refreshing...' : 'Refresh Logs'}\r\n                    </button>\r\n                </div>\r\n                \r\n                <div className=\"log-list space-y-4 max-h-[500px] overflow-y-auto pr-2\">\r\n                    {storedLogs.length > 0 ? (\r\n                        storedLogs.map((log, index) => (\r\n                            <div key={log.id} className=\"p-4 bg-gray-700 border border-gray-600 rounded-xl shadow-md hover:bg-gray-600 transition duration-150\">\r\n                                <p className=\"font-bold text-blue-400 flex justify-between items-center\">\r\n                                    Log ID: {log.id.substring(0, 8)}...\r\n                                    <span className=\"text-xs font-normal text-gray-400\">{log.timestamp}</span>\r\n                                </p>\r\n                                <hr className=\"my-2 border-gray-600\"/>\r\n                                <div className=\"space-y-2 text-sm text-gray-300\">\r\n                                    <p><strong className=\"text-blue-200\">Problem:</strong> {log.problem}</p>\r\n                                    <p><strong className=\"text-blue-200\">Cause:</strong> {log.cause}</p>\r\n                                    <p><strong className=\"text-blue-200\">Steps:</strong> {log.steps}</p>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"text-gray-400 text-center py-4\">\r\n                            {loading ? 'Loading logs...' : 'No knowledge logs found for this expert yet.'}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ExpertPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}